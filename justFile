# Default build target
default:
  @just clean
  @just build

# Build the WASM file
build:
  cp "$(go env GOROOT)/misc/wasm/wasm_exec.js" .
  GOOS=js GOARCH=wasm go build -o main.wasm -ldflags="-s -w" ./src/wasm/


# Clean build artifacts
clean:
  rm -f wasm_exec.js main.wasm

test:
  @echo "Running tests..."
  go test ./src/wasm/... -v

preview:
  @just build
  @echo "Starting local server..."
  @http-server . -c-1

deploy:
  @just test
  @just build
  @echo "Deploying to GitHub Pages..."
  aicommit
  git push origin main

